---
title: Openldap Server ubuntu 12.04
date: 2012-02-16 20:22:07
tags:
    
    - Security
    
     
categories:
    
    - Security
    
     
keywords: 
    
    - Security
    
     
---
<p>hur man installerar Openldap server p친 en ubuntu 12.04.<br />
Obs se datumen ubuntu 12.04 칛r inte ute 칛n s친 denna 칛r lite innan kan man s칛ga.</p>
<p>N칛r man installerat oepnldap server har dom kommit p친 den supersmarta iden att man ska<br />
ta den dom칛n som finns i hostfilen och bygga ett ldap tr칛d av det.</p>
<p>s친  /etc/hosts f칬r mig ser ut s친 h칛r.</p>
<pre>
127.0.0.1       localhost
127.0.1.1       vh-hv-bas2.elinofied.se vh-hv-bas2
</pre>
<p>vilket g칬r att nu d친 jag installerar slapd s친 kommer den fixa et tr칛d fr친n b칬rjan som heter</p>
<p><b>elinofied.se</b><br />
Detta tog mig s칛kert 4 timmar att fatta 游뗵</p>
<p> f칬r att kolla att det funkar g친 till katalogen</p>
<p>/etc/ldap/slapd.d/cn=config</p>
<p>och k칬r en grep f칬r att se s친 det funkade.</p>
<pre>
grep elinofied *
</pre>
<p>Fick nu ut s친 jag ser att den skapat min tr칛d.</p>
<p><b>Daxs att sl칛nga in lite bra saker i den d친</b></p>
<p>g칬r en fil som heter base.ldif och l칛gg in f칬ljande i den.</p>
<pre>
dn: ou=People,dc=elinofied,dc=se
objectClass: organizationalUnit
ou: People

dn: ou=Groups,dc=elinofied,dc=se
objectClass: organizationalUnit
ou: Groups
</pre>
<p>K칬r sedan filen med kommandot</p>
<pre>
ldapadd -x -D cn=admin,dc=elinofied,dc=se -W -f base.ldif
</pre>
<p>Och d친 ska du f친 detta tillbaka efter att du skrivit in l칬senordet som du angav d친 du installera slapd.</p>
<pre>
Enter LDAP Password: 
adding new entry "ou=People,dc=elinofied,dc=se"

adding new entry "ou=Groups,dc=elinofied,dc=se"


</pre>
<p>Daxs att l칛gga till en anv칛ndare.</p>
<p>g칬r en fil som heter user.ldif</p>
<pre>
dn: uid=mahe,ou=People,dc=elinofied,dc=se
objectClass: inetOrgPerson
objectClass: posixAccount
objectClass: shadowAccount
uid: mahe
sn: Mattias
givenName: Mattias
cn: Mattias Hemmingsson
displayName: Mattias Hemmingsson
uidNumber: 1000
gidNumber: 10000
userPassword: passwordformahe
gecos: Mattias Hemmingsson
loginShell: /bin/bash
homeDirectory: /home/mahe
shadowExpire: -1
shadowFlag: 0
shadowWarning: 7
shadowMin: 8
shadowMax: 999999
shadowLastChange: 10877
mail: mahe@ahavaxthuset.se
initials: mh
</pre>
<p>L칛gg sedan in den nya anv칛ndaren med</p>
<pre>
ldapadd -x -D cn=admin,dc=elinofied,dc=se -W -f adduser.ldif

</pre>
<p>och pang nu har vi satt upp en ldapserver fr친n scratch p친 en ubuntu 12.04.<br />
Ska nu 칛ven s칛tta upp replicering och tls f칬r en helt klar server.</p>
<p>The post is brought to you by <a href="http://fedorahosted.org/lekhonee">lekhonee</a> v0.7</p>
