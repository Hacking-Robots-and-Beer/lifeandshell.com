---
title: Apache Strong SSL config
date: 2014-01-19 22:46:53
tags:
    
    - Linux
    
    
    - Security
    
    
    - Web
    
     
categories:
    
    - Linux
    
    
    - Security
    
    
    - Web
    
     
keywords: 
    
    - Linux
    
    
    - Security
    
    
    - Web
    
     
---
<p>So only enable SSL on Apache is not good enough there are some config to add to<br />
apache to make it stronger.</p>
<p>&nbsp;</p>
<p>This are the setting i use in my apache ssl configs.</p>
<pre>SSLEngine On
 SSLCertificateFile /etc/apache2/ssl/apache.pem
 SSLCertificateKeyFile /etc/apache2/ssl/apache.key</pre>
<pre>Header add Strict-Transport-Security "max-age=15768000"
 SSLCompression off
SSLUseStapling on
SSLStaplingResponderTimeout 5
SSLStaplingReturnResponderErrors off
SSLStaplingCache shmcb:/var/run/ocsp(128000)
 SSLProtocol All -SSLv2 -SSLv3
 SSLCipherSuite ECDHE-RSA-AES256-GCM-SHA384:ECDHE-RSA-AES128-GCM-SHA256:DHE-RSA-AES256-GCM-SHA384:DHE-RSA-AES128-GCM-SHA256:ECDHE-RSA-AES256-SHA384:ECDHE-RSA-AES128-SHA256:ECDHE-RSA-AES256-SHA:ECDHE-RSA-AES128-SHA:DHE-RSA-AES256-SHA256:DHE-RSA-AES128-SHA256:DHE-RSA-AES256-SHA:DHE-RSA-AES128-SHA:ECDHE-RSA-DES-CBC3-SHA:EDH-RSA-DES-CBC3-SHA:AES256-GCM-SHA384:AES128-GCM-SHA256:AES256-SHA256:AES128-SHA256:AES256-SHA:AES128-SHA:DES-CBC3-SHA:HIGH:!aNULL:!eNULL:!EXPORT:!CAMELLIA:!DES:!MD5:!PSK:!RC4</pre>
<p>And for generating you cert I use</p>
<pre>openssl req -new -x509 -days 365 -nodes -out /etc/apache2/ssl/apache.pem -keyout /etc/apache2/ssl/apache.key</pre>
<p>If you plan to get a signing request</p>
<pre>openssl req -newkey rsa:2048 -days 365 -nodes -keyout www.mydomain.com.key -out www.mydomain.com.csr</pre>
<p>Then change your ssl settings to</p>
<pre>SSLEngine On
SSLCertificateFile /etc/apache2/ssl/www.mydomain.com.crt
SSLCertificateKeyFile /etc/apache2/ssl/www.mydomain.com.key
SSLCACertificateFile /etc/apache2/ssl/verisign.cer</pre>
<p>&nbsp;</p>
<p>I got my settings from this great places</p>
<p><a href="https://library.linode.com/web-servers/apache/ssl-guides/ubuntu-12.04-precise-pangolin">https://library.linode.com/web-servers/apache/ssl-guides/ubuntu-12.04-precise-pangolin</a></p>
<p><a href="https://www.insecure.ws/2013/10/11/ssltls-configuration-for-apache-mod_ssl/">https://www.insecure.ws/2013/10/11/ssltls-configuration-for-apache-mod_ssl/</a></p>
<p><a href="https://raymii.org/s/tutorials/Strong_SSL_Security_On_Apache2.html">https://raymii.org/s/tutorials/Strong_SSL_Security_On_Apache2.html</a></p>
<p>&nbsp;</p>
