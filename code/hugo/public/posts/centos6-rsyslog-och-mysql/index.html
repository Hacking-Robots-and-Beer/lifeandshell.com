<!DOCTYPE html>
<html lang="en-us">
<head>
  <link rel="preload" href="/lib/font-awesome/webfonts/fa-brands-400.woff2" as="font" type="font/woff2" crossorigin="anonymous">
  <link rel="preload" href="/lib/font-awesome/webfonts/fa-regular-400.woff2" as="font" type="font/woff2" crossorigin="anonymous">
  <link rel="preload" href="/lib/font-awesome/webfonts/fa-solid-900.woff2" as="font" type="font/woff2" crossorigin="anonymous">
  <link rel="preload" href="/lib/JetBrainsMono/web/woff2/JetBrainsMono-Regular.woff2" as="font" type="font/woff2" crossorigin="anonymous">
  
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title> centos6 rsyslog och mysql | Life and Shell</title>
  <link rel = 'canonical' href = 'https://lifeandshell.com/posts/centos6-rsyslog-och-mysql/'>
  <meta name="description" content="  Mattias Hemmingsson: Welcome to my private site collecting blog post, Git updates and podcast episodes">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="robots" content="all,follow">
  <meta name="googlebot" content="index,follow,snippet,archive">



 <script async src="https://www.googletagmanager.com/gtag/js?id=G-3SYH00HY9X"></script>
 <script>
   window.dataLayer = window.dataLayer || [];
   function gtag(){dataLayer.push(arguments);}
   gtag('js', new Date());
   gtag('config', 'G-3SYH00HY9X');
 </script>


  <meta property="og:url" content="https://lifeandshell.com/posts/centos6-rsyslog-och-mysql/">
  <meta property="og:site_name" content="Life and Shell">
  <meta property="og:title" content="centos6 rsyslog och mysql">
  <meta property="og:description" content="För att få lite kontroll på alla loggar ska jag installera en central rsyslog server.
Vi ska spara alla loggar i mysql så man lätt kan komma åt loggarna och även kunna se de i “live”.
yum install rsyslog rsyslog-mysql mysql-server Sätt upp mysql för att kunna ta imot loggarna.
Vi laddar in en sql fil från syslog som sätter upp en databas som heter Syslog och laddar den med tabeller.">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2012-09-03T14:38:56+00:00">
    <meta property="article:modified_time" content="2012-09-03T14:38:56+00:00">
    <meta property="article:tag" content="Uncategorized">

  
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="centos6 rsyslog och mysql">
  <meta name="twitter:description" content="För att få lite kontroll på alla loggar ska jag installera en central rsyslog server.
Vi ska spara alla loggar i mysql så man lätt kan komma åt loggarna och även kunna se de i “live”.
yum install rsyslog rsyslog-mysql mysql-server Sätt upp mysql för att kunna ta imot loggarna.
Vi laddar in en sql fil från syslog som sätter upp en databas som heter Syslog och laddar den med tabeller.">

  
  
    
  
  
  <link rel="stylesheet" href="https://lifeandshell.com/css/styles.c05d68261bf086a9d7713c4f8a6215a3601608e267a816a7ee58f139b3d1aae51222aae2081c8e0c6bd35e1334773b7a16283022f31f92afd93bb37e5e822e66.css" integrity="sha512-wF1oJhvwhqnXcTxPimIVo2AWCOJnqBan7ljxObPRquUSIqriCByODGvTXhM0dzt6FigwIvMfkq/ZO7N&#43;XoIuZg=="> 

  
  
  
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  

  
<link rel="icon" type="image/png" href="https://lifeandshell.com/images/favicon.ico" />

  
  
  

</head>

<body class="max-width mx-auto px3 ltr">
  <div class="content index py4">

  <div id="header-post">
  <a id="menu-icon" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;" aria-label="Top of Page"><i class="fas fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
         
        <li><a href="/">Home</a></li>
         
        <li><a href="/posts/">Writings</a></li>
         
        <li><a href="/tags/">Tags</a></li>
         
        <li><a href="/git/">Git</a></li>
         
        <li><a href="/podcast/">Podcast</a></li>
         
        <li><a href="/about/">About</a></li>
        
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        <li>
          <a class="icon" href=" https://lifeandshell.com/posts/clamav-viruscan-script/" aria-label="Previous">
            <i class="fas fa-chevron-left" aria-hidden="true" onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i>
          </a>
        </li>
        
        
        <li>
          <a class="icon" href="https://lifeandshell.com/posts/rsyslog-tls-mellan-server-och-klient/" aria-label="Next">
            <i class="fas fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i>
          </a>
        </li>
        
        <li>
          <a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" aria-label="Top of Page">
            <i class="fas fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i>
          </a>
        </li>
        <li>
          <a class="icon" href="#" aria-label="Share">
            <i class="fas fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i>
          </a>
        </li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      
      <ul>
  
  
    
  
  
  <li>
    <a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2flifeandshell.com%2fposts%2fcentos6-rsyslog-och-mysql%2f" aria-label="Facebook">
      <i class="fab fa-facebook " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://twitter.com/share?url=https%3a%2f%2flifeandshell.com%2fposts%2fcentos6-rsyslog-och-mysql%2f&text=centos6%20rsyslog%20och%20mysql" aria-label="Twitter">
      <i class="fab fa-twitter " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2flifeandshell.com%2fposts%2fcentos6-rsyslog-och-mysql%2f&title=centos6%20rsyslog%20och%20mysql" aria-label="Linkedin">
      <i class="fab fa-linkedin " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2flifeandshell.com%2fposts%2fcentos6-rsyslog-och-mysql%2f&is_video=false&description=centos6%20rsyslog%20och%20mysql" aria-label="Pinterest">
      <i class="fab fa-pinterest " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="mailto:?subject=centos6%20rsyslog%20och%20mysql&body=Check out this article: https%3a%2f%2flifeandshell.com%2fposts%2fcentos6-rsyslog-och-mysql%2f" aria-label="Email">
      <i class="fas fa-envelope " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2flifeandshell.com%2fposts%2fcentos6-rsyslog-och-mysql%2f&title=centos6%20rsyslog%20och%20mysql" aria-label="Pocket">
      <i class="fab fa-get-pocket " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2flifeandshell.com%2fposts%2fcentos6-rsyslog-och-mysql%2f&title=centos6%20rsyslog%20och%20mysql" aria-label="reddit">
      <i class="fab fa-reddit " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://www.tumblr.com/share/link?url=https%3a%2f%2flifeandshell.com%2fposts%2fcentos6-rsyslog-och-mysql%2f&name=centos6%20rsyslog%20och%20mysql&description=F%c3%b6r%20att%20f%c3%a5%20lite%20kontroll%20p%c3%a5%20alla%20loggar%20ska%20jag%20installera%20en%20central%20rsyslog%20server.%0aVi%20ska%20spara%20alla%20loggar%20i%20mysql%20s%c3%a5%20man%20l%c3%a4tt%20kan%20komma%20%c3%a5t%20loggarna%20och%20%c3%a4ven%20kunna%20se%20de%20i%20%26%238220%3blive%26%238221%3b.%0ayum%20install%20rsyslog%20rsyslog-mysql%20mysql-server%20S%c3%a4tt%20upp%20mysql%20f%c3%b6r%20att%20kunna%20ta%20imot%20loggarna.%0aVi%20laddar%20in%20en%20sql%20fil%20fr%c3%a5n%20syslog%20som%20s%c3%a4tter%20upp%20en%20databas%20som%20heter%20Syslog%20och%20laddar%20den%20med%20tabeller." aria-label="Tumblr">
      <i class="fab fa-tumblr " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://news.ycombinator.com/submitlink?u=https%3a%2f%2flifeandshell.com%2fposts%2fcentos6-rsyslog-och-mysql%2f&t=centos6%20rsyslog%20och%20mysql" aria-label="Hacker News">
      <i class="fab fa-hacker-news " aria-hidden="true"></i>
    </a>
  </li>
</ul>

    </div>
    
    <div id="toc">
      
    </div>
    
  </span>
</div>


  <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
    <header>
      <h1 class="posttitle" itemprop="name headline">
        centos6 rsyslog och mysql
      </h1>
      <div class="meta">
        
        <div class="postdate">
          
          <time datetime="2012-09-03 14:38:56 &#43;0000 UTC" itemprop="datePublished">2012-09-03</time>
          
        </div>
        
        
        <div class="article-read-time">
          <i class="far fa-clock"></i>
          
          1 minute read
        </div>
        
        
        <div class="article-category">
            <i class="fas fa-archive"></i>
            
            
            <a class="category-link" href="/categories/uncategorized">Uncategorized</a>
            
        </div>
        
        
        <div class="article-tag">
            <i class="fas fa-tag"></i>
            
            
            <a class="tag-link" href="/tags/uncategorized" rel="tag">Uncategorized</a>
            
        </div>
        
      </div>
    </header>

  
    
    <div class="content" itemprop="articleBody">
      <p>För att få lite kontroll på alla loggar ska jag installera en central rsyslog server.<br />
Vi ska spara alla loggar i mysql så man lätt kan komma åt loggarna och även kunna se de i &#8220;live&#8221;.</p>
<pre>
yum install rsyslog rsyslog-mysql mysql-server
</pre>
<p>Sätt upp mysql för att kunna ta imot loggarna.<br />
Vi laddar in en sql fil från syslog som sätter upp en databas som heter Syslog och laddar den med tabeller.<br />
Och skapa en användare som får tillgång till den nya databasen.</p>
<p><b>Daxs att ladda in lite tabeller i dataasen </b></p>
<pre>
mysql -u root -p syslog < /usr/share/doc/rsyslog-mysql-5.8.10/createDB.sql
</pre>
<p><b>Lägg till en ny användare </b></p>
<pre>
CREATE USER 'syslog'@'localhost' IDENTIFIED BY 'syslog_password';
GRANT ALL PRIVILEGES ON Syslog.* TO 'syslog'@'localhost';
FLUSH PRIVILEGES;


</pre>
<p>Glöm också att inte sätta ett lösenord till root användaren.</p>
<p><b>Daxs att sätt upp rsyslog att använda mysql för att logga </b></p>
<pre>
vi /etc/rsyslog.conf
</pre>
<p><b>Lägg in följande saker eller avmarkera de</b> </p>
<pre>
$ModLoad ommysql  #  Load mysql support for rsyslog
$ModLoad imuxsock # provides support for local system logging (e.g. via logger command)
$ModLoad imklog   # provides kernel logging support (previously done by rklogd)
#$ModLoad immark  # provides --MARK-- message capability

# Provides UDP syslog reception
$ModLoad imudp
$UDPServerRun 514
$UDPServerAddress 0.0.0.0

# Provides TCP syslog reception
$ModLoad imtcp
$InputTCPServerRun 514



</pre>
<p>Och lägg denna över bland loggnings värderna </p>
<pre>

*.*       : ommysql:localhost,Syslog,syslog,syslog-password
</pre>
<p><b>Ändra filen så den ser ut såhär<b></p>
<p>vi /etc/sysconfig/rsyslog</p>
<pre>
SYSLOGD_OPTIONS="-m 0 -r"
</pre>
<p>The post is brought to you by <a href="http://fedorahosted.org/lekhonee">lekhonee</a> v0.7</p>

    </div>
  </article>

  
  






  <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/posts/">Writings</a></li>
         
          <li><a href="/tags/">Tags</a></li>
         
          <li><a href="/git/">Git</a></li>
         
          <li><a href="/podcast/">Podcast</a></li>
         
          <li><a href="/about/">About</a></li>
        
      </ul>
    </div>

    
    <div id="toc-footer" style="display: none">
      
    </div>
    

    <div id="share-footer" style="display: none">
      
      <ul>
  
  
    
  
  
  <li>
    <a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2flifeandshell.com%2fposts%2fcentos6-rsyslog-och-mysql%2f" aria-label="Facebook">
      <i class="fab fa-facebook fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://twitter.com/share?url=https%3a%2f%2flifeandshell.com%2fposts%2fcentos6-rsyslog-och-mysql%2f&text=centos6%20rsyslog%20och%20mysql" aria-label="Twitter">
      <i class="fab fa-twitter fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2flifeandshell.com%2fposts%2fcentos6-rsyslog-och-mysql%2f&title=centos6%20rsyslog%20och%20mysql" aria-label="Linkedin">
      <i class="fab fa-linkedin fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2flifeandshell.com%2fposts%2fcentos6-rsyslog-och-mysql%2f&is_video=false&description=centos6%20rsyslog%20och%20mysql" aria-label="Pinterest">
      <i class="fab fa-pinterest fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="mailto:?subject=centos6%20rsyslog%20och%20mysql&body=Check out this article: https%3a%2f%2flifeandshell.com%2fposts%2fcentos6-rsyslog-och-mysql%2f" aria-label="Email">
      <i class="fas fa-envelope fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2flifeandshell.com%2fposts%2fcentos6-rsyslog-och-mysql%2f&title=centos6%20rsyslog%20och%20mysql" aria-label="Pocket">
      <i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2flifeandshell.com%2fposts%2fcentos6-rsyslog-och-mysql%2f&title=centos6%20rsyslog%20och%20mysql" aria-label="reddit">
      <i class="fab fa-reddit fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://www.tumblr.com/share/link?url=https%3a%2f%2flifeandshell.com%2fposts%2fcentos6-rsyslog-och-mysql%2f&name=centos6%20rsyslog%20och%20mysql&description=F%c3%b6r%20att%20f%c3%a5%20lite%20kontroll%20p%c3%a5%20alla%20loggar%20ska%20jag%20installera%20en%20central%20rsyslog%20server.%0aVi%20ska%20spara%20alla%20loggar%20i%20mysql%20s%c3%a5%20man%20l%c3%a4tt%20kan%20komma%20%c3%a5t%20loggarna%20och%20%c3%a4ven%20kunna%20se%20de%20i%20%26%238220%3blive%26%238221%3b.%0ayum%20install%20rsyslog%20rsyslog-mysql%20mysql-server%20S%c3%a4tt%20upp%20mysql%20f%c3%b6r%20att%20kunna%20ta%20imot%20loggarna.%0aVi%20laddar%20in%20en%20sql%20fil%20fr%c3%a5n%20syslog%20som%20s%c3%a4tter%20upp%20en%20databas%20som%20heter%20Syslog%20och%20laddar%20den%20med%20tabeller." aria-label="Tumblr">
      <i class="fab fa-tumblr fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://news.ycombinator.com/submitlink?u=https%3a%2f%2flifeandshell.com%2fposts%2fcentos6-rsyslog-och-mysql%2f&t=centos6%20rsyslog%20och%20mysql" aria-label="Hacker News">
      <i class="fab fa-hacker-news fa-lg" aria-hidden="true"></i>
    </a>
  </li>
</ul>

    </div>

    <div id="actions-footer">
      
        <a id="menu-toggle" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;" aria-label="Menu">
          <i class="fas fa-bars fa-lg" aria-hidden="true"></i> Menu</a>
        
        <a id="toc-toggle" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;" aria-label="TOC">
          <i class="fas fa-list fa-lg" aria-hidden="true"></i> TOC</a>
        
        <a id="share-toggle" class="icon" href="#" onclick="$('#share-footer').toggle();return false;" aria-label="Share">
          <i class="fas fa-share-alt fa-lg" aria-hidden="true"></i> share</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" aria-label="Top of Page">
          <i class="fas fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a>
    </div>

  </div>
</div>


  <footer id="footer">
  <div class="footer-left">
    Copyright  &copy; 2026  Mattias Hemmingssion <a href="mailto:mattias@lifeandshell.com">mattias@lifeandshell.com</a> 
  </div>
  <div class="footer-right">
    <nav>
      <ul>
         
        <li><a href="/">Home</a></li>
         
        <li><a href="/posts/">Writings</a></li>
         
        <li><a href="/tags/">Tags</a></li>
         
        <li><a href="/git/">Git</a></li>
         
        <li><a href="/podcast/">Podcast</a></li>
         
        <li><a href="/about/">About</a></li>
        
      </ul>
    </nav>
  </div>
</footer>


  </div>
</body>

<link rel="stylesheet" href=/lib/font-awesome/css/all.min.css>
<script src=/lib/jquery/jquery.min.js></script>
<script src=/js/main.js></script>

<script src=/js/code-copy.js></script>




</html>
