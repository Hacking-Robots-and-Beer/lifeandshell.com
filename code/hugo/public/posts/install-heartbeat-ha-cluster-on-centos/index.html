<!DOCTYPE html>
<html lang="en-us">
<head>
  <link rel="preload" href="/lib/font-awesome/webfonts/fa-brands-400.woff2" as="font" type="font/woff2" crossorigin="anonymous">
  <link rel="preload" href="/lib/font-awesome/webfonts/fa-regular-400.woff2" as="font" type="font/woff2" crossorigin="anonymous">
  <link rel="preload" href="/lib/font-awesome/webfonts/fa-solid-900.woff2" as="font" type="font/woff2" crossorigin="anonymous">
  <link rel="preload" href="/lib/JetBrainsMono/web/woff2/JetBrainsMono-Regular.woff2" as="font" type="font/woff2" crossorigin="anonymous">
  
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title> Install Heartbeat HA cluster on Centos | Life and Shell</title>
  <link rel = 'canonical' href = 'https://lifeandshell.com/posts/install-heartbeat-ha-cluster-on-centos/'>
  <meta name="description" content="  Mattias Hemmingsson: Welcome to my private site collecting blog post, Git updates and podcast episodes">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="robots" content="all,follow">
  <meta name="googlebot" content="index,follow,snippet,archive">



 <script async src="https://www.googletagmanager.com/gtag/js?id=G-3SYH00HY9X"></script>
 <script>
   window.dataLayer = window.dataLayer || [];
   function gtag(){dataLayer.push(arguments);}
   gtag('js', new Date());
   gtag('config', 'G-3SYH00HY9X');
 </script>


  <meta property="og:url" content="https://lifeandshell.com/posts/install-heartbeat-ha-cluster-on-centos/">
  <meta property="og:site_name" content="Life and Shell">
  <meta property="og:title" content="Install Heartbeat HA cluster on Centos">
  <meta property="og:description" content="So the backbone of my webcluster i use Heartbeat to monitor the server performance.
Heartbeat is setup to monitor the servers and to take actions if anything happens with some of the nodes.
This guide is for migraing and ip addres from one node to the secondary of the first node goes down.
Then i configure the other servers like apache ore mysql ontop.
First begin to enabling EPEL repos.">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2013-07-30T19:40:01+00:00">
    <meta property="article:modified_time" content="2013-07-30T19:40:01+00:00">
    <meta property="article:tag" content="Linux">

  
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Install Heartbeat HA cluster on Centos">
  <meta name="twitter:description" content="So the backbone of my webcluster i use Heartbeat to monitor the server performance.
Heartbeat is setup to monitor the servers and to take actions if anything happens with some of the nodes.
This guide is for migraing and ip addres from one node to the secondary of the first node goes down.
Then i configure the other servers like apache ore mysql ontop.
First begin to enabling EPEL repos.">

  
  
    
  
  
  <link rel="stylesheet" href="https://lifeandshell.com/css/styles.c05d68261bf086a9d7713c4f8a6215a3601608e267a816a7ee58f139b3d1aae51222aae2081c8e0c6bd35e1334773b7a16283022f31f92afd93bb37e5e822e66.css" integrity="sha512-wF1oJhvwhqnXcTxPimIVo2AWCOJnqBan7ljxObPRquUSIqriCByODGvTXhM0dzt6FigwIvMfkq/ZO7N&#43;XoIuZg=="> 

  
  
  
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  

  
<link rel="icon" type="image/png" href="https://lifeandshell.com/images/favicon.ico" />

  
  
  

</head>

<body class="max-width mx-auto px3 ltr">
  <div class="content index py4">

  <div id="header-post">
  <a id="menu-icon" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;" aria-label="Top of Page"><i class="fas fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
         
        <li><a href="/">Home</a></li>
         
        <li><a href="/posts/">Writings</a></li>
         
        <li><a href="/tags/">Tags</a></li>
         
        <li><a href="/git/">Git</a></li>
         
        <li><a href="/podcast/">Podcast</a></li>
         
        <li><a href="/about/">About</a></li>
        
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        <li>
          <a class="icon" href=" https://lifeandshell.com/posts/install-puppet-clinet-on-centos-6/" aria-label="Previous">
            <i class="fas fa-chevron-left" aria-hidden="true" onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i>
          </a>
        </li>
        
        
        <li>
          <a class="icon" href="https://lifeandshell.com/posts/install-ha-proxy-for-load-balansing-on-centos/" aria-label="Next">
            <i class="fas fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i>
          </a>
        </li>
        
        <li>
          <a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" aria-label="Top of Page">
            <i class="fas fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i>
          </a>
        </li>
        <li>
          <a class="icon" href="#" aria-label="Share">
            <i class="fas fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i>
          </a>
        </li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      
      <ul>
  
  
    
  
  
  <li>
    <a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2flifeandshell.com%2fposts%2finstall-heartbeat-ha-cluster-on-centos%2f" aria-label="Facebook">
      <i class="fab fa-facebook " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://twitter.com/share?url=https%3a%2f%2flifeandshell.com%2fposts%2finstall-heartbeat-ha-cluster-on-centos%2f&text=Install%20Heartbeat%20HA%20cluster%20on%20Centos" aria-label="Twitter">
      <i class="fab fa-twitter " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2flifeandshell.com%2fposts%2finstall-heartbeat-ha-cluster-on-centos%2f&title=Install%20Heartbeat%20HA%20cluster%20on%20Centos" aria-label="Linkedin">
      <i class="fab fa-linkedin " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2flifeandshell.com%2fposts%2finstall-heartbeat-ha-cluster-on-centos%2f&is_video=false&description=Install%20Heartbeat%20HA%20cluster%20on%20Centos" aria-label="Pinterest">
      <i class="fab fa-pinterest " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="mailto:?subject=Install%20Heartbeat%20HA%20cluster%20on%20Centos&body=Check out this article: https%3a%2f%2flifeandshell.com%2fposts%2finstall-heartbeat-ha-cluster-on-centos%2f" aria-label="Email">
      <i class="fas fa-envelope " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2flifeandshell.com%2fposts%2finstall-heartbeat-ha-cluster-on-centos%2f&title=Install%20Heartbeat%20HA%20cluster%20on%20Centos" aria-label="Pocket">
      <i class="fab fa-get-pocket " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2flifeandshell.com%2fposts%2finstall-heartbeat-ha-cluster-on-centos%2f&title=Install%20Heartbeat%20HA%20cluster%20on%20Centos" aria-label="reddit">
      <i class="fab fa-reddit " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://www.tumblr.com/share/link?url=https%3a%2f%2flifeandshell.com%2fposts%2finstall-heartbeat-ha-cluster-on-centos%2f&name=Install%20Heartbeat%20HA%20cluster%20on%20Centos&description=So%20the%20backbone%20of%20my%20webcluster%20i%20use%20Heartbeat%20to%20monitor%20the%20server%20performance.%0aHeartbeat%20is%20setup%20to%20monitor%20the%20servers%20and%20to%20take%20actions%20if%20anything%20happens%20with%20some%20of%20the%20nodes.%0aThis%20guide%20is%20for%20migraing%20and%20ip%20addres%20from%20one%20node%20to%20the%20secondary%20of%20the%20first%20node%20goes%20down.%0aThen%20i%20configure%20the%20other%20servers%20like%20apache%20ore%20mysql%20ontop.%0aFirst%20begin%20to%20enabling%20EPEL%20repos." aria-label="Tumblr">
      <i class="fab fa-tumblr " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://news.ycombinator.com/submitlink?u=https%3a%2f%2flifeandshell.com%2fposts%2finstall-heartbeat-ha-cluster-on-centos%2f&t=Install%20Heartbeat%20HA%20cluster%20on%20Centos" aria-label="Hacker News">
      <i class="fab fa-hacker-news " aria-hidden="true"></i>
    </a>
  </li>
</ul>

    </div>
    
    <div id="toc">
      
    </div>
    
  </span>
</div>


  <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
    <header>
      <h1 class="posttitle" itemprop="name headline">
        Install Heartbeat HA cluster on Centos
      </h1>
      <div class="meta">
        
        <div class="postdate">
          
          <time datetime="2013-07-30 19:40:01 &#43;0000 UTC" itemprop="datePublished">2013-07-30</time>
          
        </div>
        
        
        <div class="article-read-time">
          <i class="far fa-clock"></i>
          
          1 minute read
        </div>
        
        
        <div class="article-category">
            <i class="fas fa-archive"></i>
            
            
            <a class="category-link" href="/categories/linux">Linux</a>
            
        </div>
        
        
        <div class="article-tag">
            <i class="fas fa-tag"></i>
            
            
            <a class="tag-link" href="/tags/linux" rel="tag">Linux</a>
            
        </div>
        
      </div>
    </header>

  
    
    <div class="content" itemprop="articleBody">
      <p>So the backbone of my webcluster i use Heartbeat to monitor the server performance.<br />
Heartbeat is setup to monitor the servers and to take actions if anything happens with some of the nodes.<br />
This guide is for migraing and ip addres from one node to the secondary of the first node goes down.</p>
<p>Then i configure the other servers like apache ore mysql ontop.</p>
<p>First begin to enabling EPEL repos.</p>
<pre>rpm -Uvh http://download.fedoraproject.org/pub/epel/6/x86_64/epel-release-6-8.noarch.rpm</pre>
<p>Install heartbeat</p>
<pre>yum install heartbeat</pre>
<p>Setup so your host fiile is ok</p>
<pre>10.20.0.21 web1
10.20.0.22 web2</pre>
<p>Create the file /etc/ha.d/ha.cf and ad the following in it</p>
<pre>keepalive 2
deadtime 30
bcast eth0
node web1 web2</pre>
<p>Create the file vi /etc/ha.d/haresources and ad the following into it</p>
<pre>web1 IPaddr::10.0.0.100/24/eth0</pre>
<p>&nbsp;</p>
<p>The ip 10.0.0.100 is the ip that will first be in web1. If web1 goes down the ip will be transfer to web2 that will take over the reqest.</p>
<p>Create the file vi /etc/ha.d/authkeys and fill it with (alter the password)</p>
<pre>auth 3
3 md5 password6asd567hajksdhjkhkjjkahdsk</pre>
<p>Setting correct chmod to authkeys</p>
<pre>chmod 600 /etc/ha.d/authkeys</pre>
<p>Copy the config files to your heartbeat nodes. And then restart you heartbeat service</p>
<pre>/etc/init.d/heartbeat restart</pre>
<p>And run an ifconfig to se where your ip is</p>
<pre>ifconfig</pre>
<p>And thats it. Now when you first node is down the ip will come up at your secondary server.</p>
<p>&nbsp;</p>

    </div>
  </article>

  
  






  <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/posts/">Writings</a></li>
         
          <li><a href="/tags/">Tags</a></li>
         
          <li><a href="/git/">Git</a></li>
         
          <li><a href="/podcast/">Podcast</a></li>
         
          <li><a href="/about/">About</a></li>
        
      </ul>
    </div>

    
    <div id="toc-footer" style="display: none">
      
    </div>
    

    <div id="share-footer" style="display: none">
      
      <ul>
  
  
    
  
  
  <li>
    <a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2flifeandshell.com%2fposts%2finstall-heartbeat-ha-cluster-on-centos%2f" aria-label="Facebook">
      <i class="fab fa-facebook fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://twitter.com/share?url=https%3a%2f%2flifeandshell.com%2fposts%2finstall-heartbeat-ha-cluster-on-centos%2f&text=Install%20Heartbeat%20HA%20cluster%20on%20Centos" aria-label="Twitter">
      <i class="fab fa-twitter fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2flifeandshell.com%2fposts%2finstall-heartbeat-ha-cluster-on-centos%2f&title=Install%20Heartbeat%20HA%20cluster%20on%20Centos" aria-label="Linkedin">
      <i class="fab fa-linkedin fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2flifeandshell.com%2fposts%2finstall-heartbeat-ha-cluster-on-centos%2f&is_video=false&description=Install%20Heartbeat%20HA%20cluster%20on%20Centos" aria-label="Pinterest">
      <i class="fab fa-pinterest fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="mailto:?subject=Install%20Heartbeat%20HA%20cluster%20on%20Centos&body=Check out this article: https%3a%2f%2flifeandshell.com%2fposts%2finstall-heartbeat-ha-cluster-on-centos%2f" aria-label="Email">
      <i class="fas fa-envelope fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2flifeandshell.com%2fposts%2finstall-heartbeat-ha-cluster-on-centos%2f&title=Install%20Heartbeat%20HA%20cluster%20on%20Centos" aria-label="Pocket">
      <i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2flifeandshell.com%2fposts%2finstall-heartbeat-ha-cluster-on-centos%2f&title=Install%20Heartbeat%20HA%20cluster%20on%20Centos" aria-label="reddit">
      <i class="fab fa-reddit fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://www.tumblr.com/share/link?url=https%3a%2f%2flifeandshell.com%2fposts%2finstall-heartbeat-ha-cluster-on-centos%2f&name=Install%20Heartbeat%20HA%20cluster%20on%20Centos&description=So%20the%20backbone%20of%20my%20webcluster%20i%20use%20Heartbeat%20to%20monitor%20the%20server%20performance.%0aHeartbeat%20is%20setup%20to%20monitor%20the%20servers%20and%20to%20take%20actions%20if%20anything%20happens%20with%20some%20of%20the%20nodes.%0aThis%20guide%20is%20for%20migraing%20and%20ip%20addres%20from%20one%20node%20to%20the%20secondary%20of%20the%20first%20node%20goes%20down.%0aThen%20i%20configure%20the%20other%20servers%20like%20apache%20ore%20mysql%20ontop.%0aFirst%20begin%20to%20enabling%20EPEL%20repos." aria-label="Tumblr">
      <i class="fab fa-tumblr fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://news.ycombinator.com/submitlink?u=https%3a%2f%2flifeandshell.com%2fposts%2finstall-heartbeat-ha-cluster-on-centos%2f&t=Install%20Heartbeat%20HA%20cluster%20on%20Centos" aria-label="Hacker News">
      <i class="fab fa-hacker-news fa-lg" aria-hidden="true"></i>
    </a>
  </li>
</ul>

    </div>

    <div id="actions-footer">
      
        <a id="menu-toggle" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;" aria-label="Menu">
          <i class="fas fa-bars fa-lg" aria-hidden="true"></i> Menu</a>
        
        <a id="toc-toggle" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;" aria-label="TOC">
          <i class="fas fa-list fa-lg" aria-hidden="true"></i> TOC</a>
        
        <a id="share-toggle" class="icon" href="#" onclick="$('#share-footer').toggle();return false;" aria-label="Share">
          <i class="fas fa-share-alt fa-lg" aria-hidden="true"></i> share</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" aria-label="Top of Page">
          <i class="fas fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a>
    </div>

  </div>
</div>


  <footer id="footer">
  <div class="footer-left">
    Copyright  &copy; 2026  Mattias Hemmingssion <a href="mailto:mattias@lifeandshell.com">mattias@lifeandshell.com</a> 
  </div>
  <div class="footer-right">
    <nav>
      <ul>
         
        <li><a href="/">Home</a></li>
         
        <li><a href="/posts/">Writings</a></li>
         
        <li><a href="/tags/">Tags</a></li>
         
        <li><a href="/git/">Git</a></li>
         
        <li><a href="/podcast/">Podcast</a></li>
         
        <li><a href="/about/">About</a></li>
        
      </ul>
    </nav>
  </div>
</footer>


  </div>
</body>

<link rel="stylesheet" href=/lib/font-awesome/css/all.min.css>
<script src=/lib/jquery/jquery.min.js></script>
<script src=/js/main.js></script>

<script src=/js/code-copy.js></script>




</html>
